!function(){"use strict";const e=document.querySelector("html").classList.contains("is-builder");var t,r=(t={},function(e){return new Promise(((r,o)=>{if(e in t)t[e]?r(t[e]):o("Preview image not found.");else{let a=document.createElement("img");a.addEventListener("load",(a=>{let l=a.target;if(120===(l.naturalWidth||l.width)){var i=l.src.split("/").pop();switch(i){case"maxresdefault.jpg":l.src=l.src.replace(i,"sddefault.jpg");break;case"sddefault.jpg":l.src=l.src.replace(i,"hqdefault.jpg");break;case"hqdefault.jpg":l.src=l.src.replace(i,"default.jpg");break;default:t[e]=null,o("Preview image not found.")}}else r(t[e]=l.src)})),a.setAttribute("src","https://img.youtube.com/vi/"+e+"/maxresdefault.jpg")}}))});e||Array.from(document.body.children).filter((function(e){return!e.matches("style, script")})).forEach((function(e){e.addEventListener("add.cards",(function(t){if(!t.target.classList.contains("carousel"))return;const o=document.querySelector("html").classList.contains("desktop");t.target.querySelectorAll("[data-bg-video-slide]").forEach((e=>{let t=function(e){if("false"===e)return!1;var t=e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/);return!!t&&t[6]}(e.getAttribute("data-bg-video-slide"));if(!t)return;let a=document.createElement("div");a.classList.add("mbr-background-video-preview"),a.style.display="none",a.style.backgroundSize="cover",a.style.backgroundPosition="center",e.querySelector(".container-slide").before(a);let l=function(e){if("false"===e)return!1;var t=e.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/);return t&&/youtu\.?be/g.test(t[3])?"youtube":!(!t||!/vimeo/g.test(t[3]))&&"vimeo"}(e.getAttribute("data-bg-video-slide")),c=e.querySelectorAll(".mbr-overlay");if("youtube"===l){if(r(t).then((e=>{a.style.backgroundImage='url("'+e+'")',a.style.display="block"})),o&&window.YouTubePlayer&&!e.querySelectorAll(".playerBox").length){let r=document.createElement("div");r.classList.add("mbr-background-video"),e.querySelector(".container-slide").before(r);let o={videoURL:t,containment:"self",showControls:!1,mute:!0,modestBranding:!0,autoplay:!0,controls:!1,origin:"*",iv_load_policy:!1,keyboard:!1,captions:!1,annotations:!1,related:!1};r.style.pointerEvents="none",(n=new YouTubePlayer(r,o)).load(t,!0),n.play(),n.loadPlaylist(),n.setLoop(!0),n.mute(),c.length&&e.querySelectorAll(".YTPOverlay").forEach((e=>{e.style.opacity=c.style.opacity,e.style.backgroundColor=c.style.backgroundColor})),function(e,t){let r={},o={};o.width=window.outerWidth,o.height=window.outerHeight;let a=e._opts.width/e._opts.height;r.width=o.width,r.height=Math.ceil(r.width/a),r.marginTop=Math.ceil(-(r.height-o.height)/2),r.height<o.height&&(r.height=o.height,r.width=Math.ceil(r.height*a),r.marginLeft=Math.ceil(-(r.width-o.width)/2)),e.setSize(r.width,r.height)}(n),e.querySelectorAll(".image_wrapper img").forEach((e=>e.style.opacity=0)),e.querySelectorAll(".image_wrapper .mbr-overlay").forEach((e=>e.style.opacity=0))}}else if(u=t,d=e=>{a.style.backgroundImage='url("'+e+'")',a.style.display="block"},(y=new XMLHttpRequest).open("GET","https://vimeo.com/api/v2/video/"+u+".json",!0),y.onreadystatechange=function(){if(4===this.readyState&&this.status>=200&&this.status<400){var e=JSON.parse(this.responseText);d(e[0].thumbnail_large)}},y.send(),y=null,o&&window.vimeo&&!e.querySelectorAll(".playerBox").length){let r=document.createElement("div");r.classList.add("mbr-background-video"),e.querySelector(".container-slide").before(r);var s={id:t,width:"100%",height:"100%",loop:!0},n=new Vimeo.Player("mbr-video-"+i,s);c.length&&e.querySelectorAll(".vimeo_player_overlay").forEach((e=>{e.style.opacity=c.style.opacity,e.style.backgroundColor=c.style.backgroundColor}))}var u,d,y})),t.target.querySelectorAll(".carousel-item iframe").forEach((e=>{e.style.transitionDuration="1000ms",e.style.transitionProperty="opacity"}));["slide.bs.carousel","section.carousel"].forEach((t=>{e.addEventListener(t,(function(e){e.target.querySelectorAll(".carousel-item.active .mb_YTPlayer").forEach((e=>{e.YTPPause()})),e.target.querySelectorAll(".carousel-item.active .vimeo_player").forEach((e=>{e.v_pause()})),e.target.querySelectorAll(".carousel-item:not(.active) iframe").forEach((e=>{e.style.opacity=0}))})),e.addEventListener(t,(function(e){e.target.querySelectorAll(".carousel-item.active .mb_YTPlayer").forEach((e=>{e.YTPPlay()})),e.target.querySelectorAll(".carousel-item.active .vimeo_player").forEach((e=>{e.v_play()})),e.target.querySelectorAll(".carousel-item.active iframe").forEach((e=>{e.dispatchEvent(new Event("resize")),e.style.opacity=1}))}))}))}))}))}();